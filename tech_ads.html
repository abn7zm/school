<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù† Ø¥Ø¯Ø§Ø±ÙŠ</title>
  <link rel="icon" href="https://i.postimg.cc/4yF2CKwD/abn.png" type="image/icon type">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Tajawal', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #dfe9f3 0%, #ffffff 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: #005d7e;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    header img {
      height: 90px;
      filter: drop-shadow(0 0 10px #00e6f6);
    }

    .return-home-button {
      background-color: #f6b100;
      color: #ffffff;
      padding: 10px 20px;
      border-radius: 5px;
      text-decoration: none;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .return-home-button:hover {
      background-color: #c48d01;
      color: white;
    }

    h1 {
      text-align: center;
      margin: 40px 0 20px;
      color: #333;
      font-size: 36px;
    }

    form {
      background-color: #ffffff;
      padding: 40px;
      max-width: 600px;
      margin: 20px auto;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    label {
      font-weight: bold;
      margin-bottom: 10px;
      display: block;
      color: #009db2;
    }

    input, textarea {
      width: 100%;
      padding: 15px;
      margin-bottom: 20px;
      border: 2px solid #ddd;
      border-radius: 6px;
      transition: border 0.3s ease;
      font-size: 18px;
    }

    input:focus, textarea:focus {
      border-color: #009db2;
      outline: none;
    }

    button {
      background-color: #009db2;
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 6px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #007a8c;
    }

    .message {
      text-align: center;
      margin-top: 20px;
      font-size: 20px;
      color: green;
    }

        .footer {
      background-color: #005d7e;
      color: #ffffff;
      padding: 25px 40px;
      width: 100%;
      text-align: right;
      margin-top: auto;
      box-sizing: border-box;
    }

    .footer h3 {
      margin-bottom: 15px;
      font-size: 22px;
      color: #ffffff;
      font-weight: bold;
      border-bottom: 2px solid #f6b100;
      padding-bottom: 5px;
    }

    .contact-list {
      list-style: none;
      padding: 0;
      margin: 0 0 20px 0;
      font-size: 18px;
    }

    .contact-list li {
      margin-bottom: 10px;
    }

    .contact-list li a {
      color: #ffffff;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .contact-list li a:hover {
      color: #007a8c;
      text-decoration: underline;
    }

    .end {
      text-align: center;
      color: #ffffff;
      font-size: 14px;
      margin-top: 15px;
    }

    a {
      text-decoration: none;
    }

    @media (max-width: 600px) {
      form {
        padding: 20px;
      }
      h1 {
        font-size: 28px;
      }
      button {
        width: 100%;
      }
    }
    .adsList {
      border:#ddd solid 2px;
      border-radius: 6px;
    }

   .btn {
     padding: 6px 12px;     
  font-size: 14px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 5px;
   }
    .ad-card {
  background-color: #fff;
  border-radius: 14px;
  padding: 16px;
  margin-bottom: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  border: 1px solid #eee;
  transition: 0.3s ease;
}
.toggle-ads {
  text-align: center;
  margin-bottom: 20px;
  cursor: pointer;
  color: #005d7e;
  user-select: none;
}

.toggle-ads:hover {
  color: #009db2;
}

.hidden {
  display: none;
}
  </style>
</head>
<body>
  <header>
    <a href="#" onclick="window.history.back();" class="return-home-button">Ø§Ù„Ø¹ÙˆØ¯Ø©</a>
    <img src="https://i.postimg.cc/Y0YGqTrW/logo1.png" alt="logo">

  </header>

  <h1>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù†</h1>

<div class="dashboard">

  <div class="right-panel">
    <form id="ad-form">
      <label for="title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:</label>
      <input type="text" id="title" name="title" required>

      <label for="link">Ø±Ø§Ø¨Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
      <input type="url" id="link" name="link">

      <label for="description">ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:</label>
      <textarea id="description" name="description" rows="5" required></textarea>

      <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
      <p class="message" id="message"></p>
      <div class="left-panel">
          <h2 class="toggle-ads"> Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© â–¼</h2>
          <div id="adsList" class="adsList hidden"></div>
       </div>
    </form>
  </div>
  </div>

 


<div class="footer">
    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h3>
    <ul class="contact-list">
      <li>ğŸ“ <a href="tel:+966536382599">+966 539084645</a></li>
      <li>ğŸ“§ <a href="mailto:abn7zm@gmail.com">abn7zm@gmail.com</a></li>
      <li>ğŸ« Ù…Ø¬Ù…Ø¹ Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø­Ø²Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ, ØªØ¨ÙˆÙƒ</li>
    </ul>
    <p class="end">Â©2023-<span id="year"></span> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙÙƒØ±ÙŠØ© ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø§Ø³Ù… Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø­Ø²Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</p>
  </div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwNsmCtC4HLbujL0hlqV4YedwhxoEEPJaM2A2ou1FeN6_9Uq7aRkboCbHYCUZMC5lBm/exec';


const titleInput = document.getElementById('title');
const descriptionInput = document.getElementById('description');
const linkInput = document.getElementById('link');
const message = document.getElementById('message');
const adForm = document.getElementById('ad-form');
const adsList = document.getElementById('adsList');


adForm.addEventListener('submit', async function (e) {
  e.preventDefault();

 
  const submitBtn = adForm.querySelector('button[type="submit"]');
  submitBtn.disabled = true;
  const originalText = submitBtn.textContent;
  submitBtn.innerHTML = `Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„... <span class="spinner" style="display:inline-block;width:16px;height:16px;border:2px solid #fff;border-top:2px solid transparent;border-radius:50%;animation:spin 0.8s linear infinite;"></span>`;

  const title = titleInput.value;
  const description = descriptionInput.value;
  const link = linkInput.value;

  try {
    const res = await fetch(SCRIPT_URL, {
      method: 'POST',
      body: new URLSearchParams({
        action: 'add',
        title,
        description,
        link
      })
    });

    if (res.ok) {
      message.textContent = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­';
      message.style.color = 'green';
      this.reset();
      await loadAds();
    } else {
      message.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„';
      message.style.color = 'red';
    }
  } catch (err) {
    message.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„';
    message.style.color = 'red';
  } finally {
    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©
    submitBtn.disabled = false;
    submitBtn.textContent = originalText;
  }
});


async function loadAds() {
  adsList.innerHTML = '<p style="text-align:center;color:#555;margin-bottom:15px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©...</p>';

  try {
    const res = await fetch(SCRIPT_URL);
    const ads = await res.json();

    adsList.innerHTML = '';
    ads.forEach(ad => {
      adsList.innerHTML += renderAd(ad);
    });
  } catch (err) {
    adsList.innerHTML = '<p style="text-align:center;color:red;">ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</p>';
  }
}


function renderAd(ad) {
  return `
  <div class="ad-card" data-row="${ad.row}">
    <div class="ad-header">
      <h3>${ad.title}</h3>
      <span class="ad-date">${new Date(ad.date).toLocaleDateString('ar-SA')}</span>
    </div>
    <p class="ad-desc">${ad.description}</p>
    ${ad.link ? `<a class="ad-link" href="${ad.link}" target="_blank">ğŸ”— ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·</a>` : ''}
    <div class="ad-actions">
      <button class="btn edit" onclick="enableEdit(${ad.row})">ØªØ¹Ø¯ÙŠÙ„ âœï¸</button>
      <button class="btn delete" onclick="deleteAd(${ad.row})">Ø­Ø°Ù ğŸ—‘ï¸</button>
    </div>
  </div>
  `;
}


function enableEdit(row) {
  const box = document.querySelector(`[data-row="${row}"]`);
  const title = box.querySelector('h3').innerText;
  const desc = box.querySelector('.ad-desc').innerText;
  const link = box.querySelector('.ad-link')?.getAttribute('href') || '';

  box.innerHTML = `
    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</label>
    <input id="edit-title-${row}" value="${title}">
    <label>ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</label>
    <textarea id="edit-desc-${row}">${desc}</textarea>
    <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
    <input id="edit-link-${row}" value="${link}">
    <div class="ad-actions">
      <button class="btn save" onclick="saveEdit(${row})">Ø­ÙØ¸</button>
      <button class="btn cancel" onclick="loadAds()">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  `;
}


async function saveEdit(row) {
  await fetch(SCRIPT_URL, {
    method: 'POST',
    body: new URLSearchParams({
      action: 'update',
      row,
      title: document.getElementById(`edit-title-${row}`).value,
      description: document.getElementById(`edit-desc-${row}`).value,
      link: document.getElementById(`edit-link-${row}`).value
    })
  });
  loadAds();
}


async function deleteAd(row) {
  if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ')) return;
  await fetch(SCRIPT_URL, {
    method: 'POST',
    body: new URLSearchParams({ action: 'delete', row })
  });
  loadAds();
}


const style = document.createElement('style');
style.textContent = `
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
`;
document.head.appendChild(style);

loadAds();
const toggleTitle = document.querySelector('.toggle-ads');

toggleTitle.addEventListener('click', () => {
  adsList.classList.toggle('hidden');


  if (adsList.classList.contains('hidden')) {
    toggleTitle.textContent = ' Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© â–¼';
  } else {
    toggleTitle.textContent = ' Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© â–²';
  }
});
</script>



</body>
</html>
