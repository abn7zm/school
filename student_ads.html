<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø·Ø§Ù„Ø¨</title>
  <link rel="icon" href="https://i.imghippo.com/files/iJhm9520ofU.png">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
       font-family: Arial, sans-serif;
  background:#f0f0f0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
    }
    .page{
  flex: 1;          /* Ù‡Ø°Ø§ Ø§Ù„Ù„ÙŠ ÙŠØ²Ù‚ Ø§Ù„ÙÙˆØªØ± Ù„ØªØ­Øª */
}
    header {
      background-color: #005d7e;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    header img {
      height: 90px;
      filter: drop-shadow(0 0 10px #00e6f6);
    }

    .return-home-button {
      background-color: #f6b100;
      color: #ffffff;
      padding: 10px 20px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      transition: 0.2s;
    }
    .return-home-button:hover { background-color: #c48d01; }

    header h1 {
      color: #fff;
      font-size: 28px;
      margin: 0;
    }

    .container {
     width: 90%;
  max-width: 1200px;
  margin: 20px auto 40px;   /* Ø§Ø­Ø°Ù margin-top:150px */
  padding: 20px;
  background: #ededed;
  border-radius: 10px;
    }

    #status, #error {
      margin: 10px 0;
      font-size: 14px;
    }
    #error { color: #c0392b; }

    /* ====== Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø©) ====== */
    .message {
      position: relative;            /* Ù…Ù‡Ù… Ø¹Ø´Ø§Ù† timestamp absolute */
      display: flex;
      flex-direction: row-reverse;
      align-items: stretch;
      background: #ffffff;
      border-radius: 14px;
      overflow: hidden;
      margin: 14px ;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      min-height: 90px;
    }

    /* Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
    .side-box {
      width: 90px;
      background: #0b8bb3;
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 0 0 90px;
    }

    .side-box img {
      width: 40px;
      height: 40px;
      object-fit: contain;
      filter: drop-shadow(0 0 6px rgba(255,255,255,0.25));
    }

    /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© */
    .message-content {
      flex: 1;
      padding: 16px 16px 16px 16px;
      padding-top: 46px;  /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„ØªØ§Ø±ÙŠØ® (Ø­ØªÙ‰ Ù…Ø§ ÙŠØºØ·ÙŠ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†) */
      text-align: right;
    }

    .message-title {
      font-size: 18px;
      font-weight: 700;
      color: #111;
      margin-bottom: 6px;
    }

    .message-text {
      font-size: 14px;
      color: #555;
      line-height: 1.7;
    }

    .message-link a {
      display: inline-block;
      margin-top: 8px;
      color: #00bcd4;
      text-decoration: underline;
      font-size: 14px;
    }

    /* Ø§Ù„ØªØ§Ø±ÙŠØ® Ø«Ø§Ø¨Øª Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ±Øª */
    .timestamp {
      position: absolute;
      top: 10px;
      right: 12px;        /* RTL: Ø£Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ† Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø© */
      background: #f6b100;
      color: #fff;
      padding: 4px 10px;
      border-radius: 14px;
      font-size: 12px;
      z-index: 2;
      white-space: nowrap;
    }

    /* Overlay Loading */
    #loadingOverlay {
      position: fixed;
      inset: 0;
      background: rgba(255, 255, 255, 0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .loader-box {
      text-align: center;
      font-size: 18px;
      color: #005d7e;
      font-weight: bold;
    }

    .spinner {
      width: 55px;
      height: 55px;
      border: 6px solid #e0e0e0;
      border-top: 6px solid #009db2;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 768px) {
      header img { height: 70px; }
      header h1 { font-size: 20px; }

      .container { width: 95%; padding: 12px; }

      .side-box { width: 75px; flex-basis: 75px; }
      .side-box img { width: 34px; height: 34px; }

      .message-content { padding: 12px; padding-top: 44px; }
      .message-title { font-size: 16px; }
      .message-text { font-size: 13px; }
      .timestamp { font-size: 11px; }
    }
    .footer {
      background-color: #005d7e;
      color: #ffffff;
      padding: 25px 40px;
      width: 100%;
      text-align: right;
      margin-top: auto;
      box-sizing: border-box;
    }

    .footer h3 {
      margin-bottom: 15px;
      font-size: 22px;
      color: #ffffff;
      font-weight: bold;
      border-bottom: 2px solid #f6b100;
      padding-bottom: 5px;
    }

    .contact-list {
      list-style: none;
      padding: 0;
      margin: 0 0 20px 0;
      font-size: 18px;
    }

    .contact-list li {
      margin-bottom: 10px;
    }

    .contact-list li a {
      color: #ffffff;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .contact-list li a:hover {
      color: #007a8c;
      text-decoration: underline;
    }
    .end {
      text-align: center;
      color: #ffffff;
      font-size: 14px;
      margin-top: 15px;
    }

    a {
      text-decoration: none;
    }

  </style>
</head>

<body>
  <div id="loadingOverlay">
    <div class="loader-box">
      <div class="spinner"></div>
      <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª...</p>
    </div>
  </div>

  <header>
    <a href="#" onclick="window.history.back();" class="return-home-button">Ø§Ù„Ø¹ÙˆØ¯Ø©</a>
    <h1>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h1>
    <img src="https://i.postimg.cc/Y0YGqTrW/logo1.png" alt="logo">
</header>
<main class="page">
  <div class="container">
    <h2>Ø§Ù„Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h2>
    <hr>
    <p id="status" dir="rtl">... Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</p>
    <div id="messages-container"></div>
    <p id="error"></p>
  </div>
</main>
 <div class="footer">
    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h3>
    <ul class="contact-list">
      <li>ğŸ“ <a href="tel:+966536382599">+966 536382599</a></li>
      <li>ğŸ“§ <a href="mailto:abn7zm@gmail.com">abn7zm@gmail.com</a></li>
      <li>ğŸ« Ù…Ø¬Ù…Ø¹ Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø­Ø²Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ, ØªØ¨ÙˆÙƒ</li>
    </ul>
    <p class="end">Â©2023-<span id="year"></span> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙÙƒØ±ÙŠØ© ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø§Ø³Ù… Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø­Ø²Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</p>
  </div>

  <script>
    function showLoading() {
      document.getElementById("loadingOverlay").style.display = "flex";
    }
    function hideLoading() {
      document.getElementById("loadingOverlay").style.display = "none";
    }

    function formatDate(isoDate) {
      const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
      const date = new Date(isoDate);
      const dayName = days[date.getDay()];
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, '0');
      const d = String(date.getDate()).padStart(2, '0');
      return `${dayName} ${y}-${m}-${d}`;
    }

    async function fetchData() {
      showLoading();

      try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbzd3bmppvAs0E4B2M-XW3SHi0J86AyBFsk-GSu0t05zE67Cj0AStThbrTMEYNwA_znpRg/exec');

        if (!response.ok) throw new Error("Network response was not ok");

        const data = await response.json();

        const messagesContainer = document.getElementById('messages-container');
        const status = document.getElementById('status');
        const error = document.getElementById('error');

        messagesContainer.innerHTML = "";
        error.textContent = "";

        if (Array.isArray(data) && data.length > 0) {
          data.forEach(row => {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';

            // timestamp (Ø«Ø§Ø¨Øª ÙÙˆÙ‚)
            const timestampDiv = document.createElement('div');
            timestampDiv.className = 'timestamp';
            timestampDiv.textContent = formatDate(row[0]);

            // side box (Ù…Ø±Ø¨Ø¹ Ø£Ø²Ø±Ù‚ + Ø£ÙŠÙ‚ÙˆÙ†Ø©)
            const sideBox = document.createElement('div');
            sideBox.className = 'side-box';
            const icon = document.createElement('img');
            icon.src = "https://i.postimg.cc/qMf0jvMw/marketing.png"; // ØºÙŠÙ‘Ø±Ù‡Ø§ Ù„Ø£ÙŠÙ‚ÙˆÙ†ØªÙƒ
            icon.alt = "icon";
            sideBox.appendChild(icon);

            // content
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';

            const titleDiv = document.createElement('div');
            titleDiv.className = 'message-title';
            titleDiv.textContent = row[1] || "";

            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.textContent = row[2] || "";

            contentDiv.appendChild(titleDiv);
            contentDiv.appendChild(textDiv);

            if (row[3]) {
              const linkDiv = document.createElement('div');
              linkDiv.className = 'message-link';
              linkDiv.innerHTML = `<a href="${row[3]}" target="_blank" rel="noopener">Ø±Ø§Ø¨Ø· Ù…Ø±ÙÙ‚</a>`;
              contentDiv.appendChild(linkDiv);
            }

            // assemble (RTL: Ø®Ù„ÙŠÙ‡ Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø©: Ø§Ù„Ù…Ø±Ø¨Ø¹ ÙŠØ³Ø§Ø±/ÙŠÙ…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ù„ÙŠ ØªØ¨ÙŠÙ‡)
            messageDiv.appendChild(timestampDiv);
            messageDiv.appendChild(sideBox);
            messageDiv.appendChild(contentDiv);

            messagesContainer.appendChild(messageDiv);
          });

          status.style.display = 'none';
        } else {
          status.style.display = 'none';
          error.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§.';
        }

        hideLoading();
      } catch (err) {
        hideLoading();
        document.getElementById('status').style.display = 'none';
        document.getElementById('error').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.';
      }
    }

    fetchData();
  </script>
</body>
</html>
