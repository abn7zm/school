<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</title>
  <link rel="icon" href="https://i.postimg.cc/4yF2CKwD/abn.png" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    li:hover {
      text-decoration: underline;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Cairo', sans-serif;
      min-height: 100vh;
      direction: rtl;
      background-color: #f2f2f2;
      text-align: center;
    }

    /* ===== Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¹Ù„Ù‰ ===== */
    .top-bar {
      position: relative;
      width: 100%;
      height: 130px;
      background-color: #005d7e;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    #logo {
      width: 150px;
      height: 150px;
      max-width: 150px;
      width: 20vw;
      min-width: 100px;
      filter: drop-shadow(0 0 10px #00e6f6);
    }
    .return {
      position: absolute;
      top: 30px;
      left: 20px;
      background-color: #f6b100;
      color: #ffffff;
      padding: 10px 20px;
      border-radius: 15px;
      font-weight: bold;
      font-size: 16px;
      display: flex;
      align-items: center;
      text-decoration: none;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .return:hover {
      background-color: #c99000;
      transform: scale(1.05);
    }

    .return img {
      margin-left: 10px;
      width: 20px;
    }


    .profile-img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #007a8c;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.15);
      margin: 20px auto 100px  auto;
      margin-right: 120px;
      display: block;
      
    }

    h2 {
      color: #005f6b;
      font-size: 24px;
      justify-content: flex-start;
      position: absolute;
      top: 140px;
      right: 245px;

    }
    .footer {
      background-color: #005d7e;
      color: #ffffff;
      padding: 25px 40px;
      width: 100%;
      text-align: right;
      margin-top: 260px;
      box-sizing: border-box;
    }

    .footer h3 {
      margin-bottom: 15px;
      font-size: 22px;
      color: #ffffff;
      font-weight: bold;
      border-bottom: 2px solid #f6b100;
      padding-bottom: 5px;
    }
    .id {
      position: absolute;
      top: 200px;
      right: 245px;
      color: #005f6b;
    }

    .info {
      display: inline-block;
      text-align: right;
      color: #333;
      width: 90%;
      max-width: 400px;
    }
    .email {
      position: relative;
      left: 720px;
      bottom: 55%;
    }
    .email_input {
      position: absolute;
      right: 25px;
      bottom: 50%;
      width: 200px;
    }
    .email_edit{
      width: 40px;
      height: 40px;
      position: absolute;
      right: 600px;
      bottom: 50%;
      border: none;
      font-size: 20px;
      color:#f6b100;
      background: none;
    }
    .email_edit:hover {
      text-decoration: underline;
      color:#d69a01;
   }
    .phone {
      position: absolute;
      right: 20px;
      bottom: 40%;
    }
    .phone_input {
      position: absolute;
      right: 20px;
      bottom: 35%;
    }
    .edit_phone {
      width: 40px;
      height: 40px;
      position: absolute;
      right: 600px;
      bottom: 35%;
      border: none;
      font-size: 20px;
      color: #f6b100;
      background: none;
    }
    .edit_phone:hover {
      text-decoration: underline;
      color: #d69a01;
    }

    .info p {
      margin: 10px 0;
      font-size: 16px;
    }

    .info label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      color: #005f6b;
    }

    .info input {
      width: 30%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
      color: #333;

    }

    .btn-group {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn-group button {
      background-color: #007a8c;
      color: #fff;
      border: none;
      padding: 12px 22px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
      min-width: 120px;
      flex: 1;
    }

    .btn-group button:hover {
      background-color: #005f6b;
    }

    .success-message {
      margin-top: 20px;
      color: green;
      font-size: 15px;
      display: none;
    }
    .student_info {
      position: absolute;
      background-color: #d9d9d9;
      width: 350px;
      height: 450px;
      left: 250px;
      top: 180px;
      border-radius: 30px;
    }
    h1 {
      color: #007a8c;
    }

    @media screen and (max-width: 425px) {
      .btn-group button {
        flex: 1 1 100%;
      }
      .id {
        position: fixed;
        right: 0px;
      }
      .id_name {
        position: fixed;
        top: 180px;
      }
    }
  </style>
</head>
<body>
  

  <div class="top-bar">
    <img src="https://i.postimg.cc/Y0YGqTrW/logo1.png" alt="Logo" id="logo" />
    <a href="student_home.html" class="return">
      Ø¹ÙˆØ¯Ø©
      <img src="https://i.postimg.cc/wMQTD7Ds/arrow.png" alt="Arrow">
    </a>
  </div>

  <img src="https://i.postimg.cc/26GGJNsB/profile.webp" alt="Profile" class="profile-img">
  <h2 id="userName">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</h2>

    <p class="id"><strong class="id_name">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©:</strong> <span id="studentId">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
  <div class="info">
    
    <label for="email" class="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
    <input type="email" id="email" placeholder="example@email.com" class="email_input">
    <button class="email_edit" onclick="enableEdit('email')">ØªØ¹Ø¯ÙŠÙ„</button>
    <label for="phone" class="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
    <button class="edit_phone" onclick="enableEdit('phone')">ØªØ¹Ø¯ÙŠÙ„</button>
    <input type="tel" id="phone" placeholder="05XXXXXXXX" class="phone_input">
  </div>

  <div class="student_info">
    <h1>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨</h1>
  </div>
  

 

  <p class="success-message" id="successMessage">âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!</p>
  <script>
    const sheetURL = "https://script.google.com/macros/s/AKfycbxu1ITIMnChWJq7Fp_PvKCzU0Gu1oBBfBi8cvhNLT6kueV5BwLAIiaVAIXOBqLyV7E7jA/exec";

    function encrypt(text) {
      return btoa(unescape(encodeURIComponent(text)));
    }

    function decrypt(text) {
      try {
        return decodeURIComponent(escape(atob(text)));
      } catch {
        return "";
      }
    }
    function enableEdit(fieldId) {
  const input = document.getElementById(fieldId);
  input.disabled = false;          // ÙŠÙÙƒ Ø§Ù„Ù‚ÙÙ„
  input.focus();                   // ÙŠØ­Ø· Ø§Ù„Ù…Ø¤Ø´Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ù‚Ù„
  input.style.background = "#fff"; // Ø´ÙƒÙ„ Ø¨Ø³ÙŠØ· ÙŠÙˆØ¶Ø­ Ø¥Ù†Ù‡ Ù…ÙØªÙˆØ­
}


    document.addEventListener('DOMContentLoaded', async function () {
      const userName = localStorage.getItem('userName') || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
      document.getElementById('userName').textContent = userName;

      const emailEncrypted = localStorage.getItem('email');
      const phoneEncrypted = localStorage.getItem('phone');

      document.getElementById('email').value = emailEncrypted ? decrypt(emailEncrypted) : '';
      document.getElementById('phone').value = phoneEncrypted ? decrypt(phoneEncrypted) : '';

      try {
        const res = await fetch(sheetURL);
        const data = await res.json();
        const match = data.find(entry => entry.name.trim() === userName.trim());

        document.getElementById('studentId').textContent = match ? match.id : "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
      } catch (err) {
        console.error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheets", err);
        document.getElementById('studentId').textContent = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„";
      }
    });

    function saveProfile() {
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (email && phone) {
        localStorage.setItem('email', encrypt(email));
        localStorage.setItem('phone', encrypt(phone));

        const msg = document.getElementById('successMessage');
        msg.style.display = 'block';
        setTimeout(() => msg.style.display = 'none', 3000);
      } else {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.");
      }
    }
  </script>
<div class="footer">
    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h3>
    <ul class="contact-list">
      <li>ğŸ“ <a href="tel:+966539084645" style="color:#ffffff; text-decoration: none; ">+966 536382599</a></li>
      <li>ğŸ“§ <a href="mailto:rsanjalawi007@gmail.com" style="color: #ffffff; text-decoration:none ;">abn7zm@gmail.com</a></li>
      <li>ğŸ« Ù…Ø¬Ù…Ø¹ Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø­Ø²Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ, ØªØ¨ÙˆÙƒ</li>
    </ul>
    <p class="end">Â©2023-<span id="year"></span> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙÙƒØ±ÙŠØ© ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø§Ø³Ù… Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø­Ø²Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</p>
  </div>
</body>
</html>

